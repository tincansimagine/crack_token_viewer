# 뤼튼 크랙 토큰 표시 스크립트

뤼튼 크랙(Wrtn Crack) 웹사이트에서 AI 응답의 토큰 수를 실시간으로 표시하는 탬퍼몽키 유저스크립트입니다.

## ✨ 주요 기능

- 🔢 **실시간 토큰 표시**: AI 응답마다 사용된 토큰 수를 실시간으로 표시
- 🎯 **정확한 매칭**: 각 메시지에 해당하는 정확한 토큰 수 표시
- 🔄 **자동 업데이트**: 새로운 메시지나 리롤 시 자동으로 토큰 정보 갱신
- 📱 **반응형 디자인**: PC와 모바일 모든 환경에서 깔끔한 표시
- 🚀 **경량화**: 기존 백업 스크립트와 독립적으로 작동하는 가벼운 확장

## 🎨 표시 방식

AI 응답 헤더에 작은 글씨로 토큰 수가 표시됩니다:

```
🤖 AI 모델 아이콘    550토큰
```

- **위치**: AI 메시지 헤더 우측
- **스타일**: 회색 작은 글씨로 깔끔하게 표시
- **형식**: "000토큰" 형태로 표시

## 🚀 설치 방법

### 1단계: 유저스크립트 매니저 설치
- **Chrome/Edge**: [Tampermonkey](https://www.tampermonkey.net/)
- **Firefox**: [Violentmonkey](https://violentmonkey.github.io/)
- **iOS Safari**: [Stay](https://apps.apple.com/kr/app/stay-for-safari/id1591620171)

### 2단계: 스크립트 설치

[![Install Script](https://img.shields.io/badge/🚀%20Install-뤼튼_토큰_표시-red?style=for-the-badge)](https://github.com/tincansimagine/crack_token_viewer/raw/refs/heads/main/wrtn-token-display.user.js)

**직접 설치 링크:**
https://github.com/tincansimagine/crack_bakcup/raw/refs/heads/main/wrtn-token-display.user.js

## 📖 사용법

1. [뤼튼 크랙](https://crack.wrtn.ai) 접속
2. 스크립트가 자동으로 활성화됩니다
3. AI와 대화하면 각 응답 옆에 토큰 수가 자동으로 표시됩니다
4. 별도의 설정이나 조작이 필요 없습니다!

## 🔧 기술적 특징

### 네트워크 요청 감지
- **Fetch API 가로채기**: `contents-api.wrtn.ai` API 응답 실시간 감지
- **XMLHttpRequest 지원**: 모든 네트워크 요청 방식 지원
- **토큰 정보 추출**: API 응답에서 `tokens.count` 값 자동 추출

### 지능적 매칭 시스템
- **순서 기반 매칭**: 토큰 히스토리를 순서대로 저장하여 정확한 매칭
- **역순 처리**: 최신 메시지에 최신 토큰을 매칭하는 알고리즘
- **중복 방지**: 이미 토큰이 표시된 메시지는 건너뛰기

### DOM 조작 최적화
- **MutationObserver**: DOM 변화 실시간 감지
- **효율적인 선택자**: `css-1q60mcv` 클래스 기반 정확한 요소 탐지
- **안전한 삽입**: 기존 UI를 해치지 않는 안전한 요소 추가

## 🎯 지원 모델

- ✅ **하이퍼챗** (Opus-4)
- ✅ **슈퍼챗+** (Sonnet-4) 
- ✅ **슈퍼챗** (Sonnet-3.7)
- ✅ **파워챗**
- ✅ **일반챗**

모든 뤼튼 크랙 채팅 모델에서 토큰 수를 정확히 표시합니다.

## ⚠️ 주의사항

- 페이지 로딩 후 약 1-2초 후부터 토큰 표시가 시작됩니다
- 네트워크 상태에 따라 토큰 정보 수집이 지연될 수 있습니다
- 기존 메시지의 토큰 정보는 새로고침 시 초기화됩니다

## 🐛 문제 해결

### 토큰이 표시되지 않는 경우
1. 브라우저 개발자 도구(F12) → 콘솔 탭 확인
2. "뤼튼 크랙 토큰 표시" 관련 로그 확인
3. 페이지 새로고침 후 재시도

### 잘못된 토큰 수가 표시되는 경우
- 페이지를 새로고침하여 토큰 히스토리 초기화
- 여러 채팅방을 오가는 경우 발생할 수 있음

## 🔄 업데이트 내역

### v1.0 (최신)
- 🎉 최초 릴리스
- 🔢 실시간 토큰 수 표시 기능
- 🎯 정확한 메시지-토큰 매칭 알고리즘
- 📱 모바일 반응형 지원
- 🔄 자동 업데이트 및 리롤 대응

## 💡 향후 계획

- 📊 토큰 사용량 통계 기능
- 💾 토큰 히스토리 로컬 저장
- ⚙️ 사용자 설정 UI
- 🎨 커스터마이징 옵션

---
